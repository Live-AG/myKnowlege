
# Настрока PostgreSQL
[[PostgreSQL setup for 1C]]

# Вариант установки до 8.3.20
1. Скачать и распаковать пакеты в каталог
2. Запуск установки пакетов в следующей последовательности с коммандой `sudo apt install` 
	1. common
	2. server
	3. ws
	4. crs - если нужен сервер хранилищa
		

# Установка 8.3.20
1.	Скачать и распаковать установочный файл
2.	Можно установить в консоле запусим файл (`setup-full-A.B.C.D-arch.run`)
3.	Для  параметрической установкив фоне необходимо запустить файл с параметрами:

### Установка в пакетном режиме
Пакетный режим включается указанием в командной строке программу установки команды -`-mode unattended`. Для указания устанавливаемых компонентов служит команда `--enable-components`. Устанавливаемые компоненты перечисляются параметрами данной команды, перечисленными через символ «,». В качестве параметров могут выступать:	


|           Параметр           | Описание                                                                         |
|:----------------------------:| -------------------------------------------------------------------------------- |
| `additional_admin_functions` | утилиту административной консоли                                                 |
|        `client_full`         | толстый клиент и возможность работы в конфигураторе.                             |
|        `client_thin`         | тонкий клиент (без возможности работы с файловым вариантом информационной базы). |
|      `client_thin_fib`       | тонкий клиент, который позволяет работать с любым вариантом информационной базы. |
|   `config_storage_server`    | сервер хранилища конфигураций.                                                   |
|    `integrity_monitoring`    | утилиту контроля целостности                                                     |
|        `liberica_jre`        | Java Runtime Environment (JRE).                                                  |
|           `server`           | кластер серверов «1С:Предприятия».                                               |
|        `server_admin`        | сервер администрирования кластера серверов «1С:Предприятия»                      |
|             `ws`             | модули расширения веб-сервера.                                                   |



Пример:

> `setup-full-8.3.20.100-x86_64.run --mode unattended --enable-components server,ws,server_admin,liberica_jre,ru,en`

	<FileName> --mode unattended --enable-components additional_admin_functions,config_storage_server,integrity_monitoring,liberica_jre,server,
	server_admin,ws
	
	
# 	Установка шрифтов
	sudo apt -y install ttf-mscorefonts-installer
	fc-cache –fv
	
# Настройка Службы

## Вариант 1:

	sudo ln -s /opt/1cv8/x86_64/8.3.20.1613/srv1cv83 /etc/init.d/srv1cv83
	sudo systemctl enable srv1cv83
	sudo systemctl restart srv1cv83
	sudo systemctl status srv1cv83
#### При переустановке
	sudo systemctl stop srv1cv83	
удалить `/etc/init.d/srv1cv83`
Выполнить предыдущую операцию
## Вариант 2:
	
>Операции по настройке должны выполняться с правами суперпользователя (root).  
  
Для того чтобы сервер «1С:Предприятия» автоматически запускался во время загрузки операционной системы, необходимо выполнить следующие действия:  
  
1. Скопировать файл `srv1cv83` из каталога (`/opt/1cv8/x86_64/<version>`) нужной разрядности и версии в каталог `/etc/init.d`.  
  
2. Переименовать скопированный файл так, чтобы имя скрипта в рамках каталога `/etc/init.d` было уникальным! Можно указать в имени скрипт запуска полный номер версии запускаемого сервера. Например, для версии (`8.3.18.100`), скрипт запуска будет иметь имя (`srv1cv83_18_100`).  
  
3. Скопировать конфигурационный файл `src1cv83.conf` из того же каталога нужной разрядности и версии в следующий каталог:  
-	для DEB-систем: `/etc/default`.  
-	для RPM-систем: `/etc/sysconfig`.  

4. В каталоге-приемнике, для скопированного конфигурационного файла, следует:  
  
-	Удалить расширение файла.  
  
-	Переименовать файл так, чтобы его имя совпадало с именем стартового скрипта (созданного при выполнении п.2) (`srv1cv83_18_100`). В переименованном конфигурационном файле будут содержать параметры запуска того сервера, чье имя носит конфигурационный файл.  
  
5. Добавьте скрипт запуска сервера в стартовый скрипт системы:  
  
-	для DEB-систем:  

		update-rc.d <УникальноеИмяСкрипта> defaults
		service <УникальноеИмяСкрипта> start
-	для RPM-систем:  

		chkconfig --add <УникальноеИмяСкрипта>
		chkconfig <УникальноеИмяСкрипта> on
  
6. Проверить работу службы можно:

		service <УникальноеИмяСкрипта> start
		
В приведенных командах `<УникальноеИмяСкрипта>`‑ это то имя скрипта запуска (`srv1cv83_18_100`).  

## Запуск нескольких версий сервера
https://infostart.ru/public/1341653/

## Запуск отладки
Если сервер «1С:Предприятия 8» работает под управлением ОС Linux, то для включения отладки необходимо включить в файл скрипта запуска сервера «1С:Предприятия 8» `srv1cv83` параметр `SRV1CV8_DEBUG=1`. 
Этот файл находится:
- в RHEL-версиях Linux — в каталоге `/etc/sysconfig`;
- в DEB-версиях Linux — в каталоге `/etc/init.d`.

# Установка сервера администрирования
[[Сервер администрирования 1С]]


# Публикация на Web-сервере

https://its.1c.ru/db/metod8dev/content/5979/hdoc

Установить [[Apache]]

Выполнить:

	cd /opt/1C/v8.3/x86_64/
	sudo ./webinst -publish -apache24 -wsdir <ИМЯ ПУБЛИКАЦИИ> -dir /var/www/<ИМЯ ПУБЛИКАЦИИ> -connstr “Srvr=<ИМЯ СЕРВЕРА;Ref=<ИМЯ БАЗЫ>” -confpath /etc/apache2/apache2.conf
	
	
# 	Удаление сервера 1С с Linux
`sudo /opt/1cv8/x86_64/<1C version>/uninstaller-full`



